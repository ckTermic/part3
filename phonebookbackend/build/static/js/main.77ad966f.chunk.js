(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{38:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var c=t(0),o=t(1),r=t.n(o),s=t(15),a=t.n(s),u=t(3),i=function(e){var n=e.setType,t=e.setMessage,o=e.setPersons,r=e.persons,s=e.phonebookServices;return Object(c.jsx)("div",{children:r.map((function(e){return Object(c.jsx)("div",{children:Object(c.jsxs)("p",{children:[e.name," ",e.number," ",Object(c.jsx)("button",{onClick:function(){return function(e){var c=r.find((function(n){return n.id===e}));c&&window.confirm("do you want to delete ".concat(c.name," from the phonebook?"))&&(s.remove(e).then((function(n){o(r.filter((function(n){return n.id!==e})))})).catch((function(e){console.log(e.response)})),n("success"),t("".concat(c.name," was deleted from the server")),setTimeout((function(){n(null),t(null)}),5e3)),console.log(r)}(e.id)},children:"delete"})]})},e.name)}))})},l=t(6),b=function(e){var n=e.persons,t=e.newName,o=e.newNumber,r=e.setNewName,s=e.setNewNumber,a=e.phonebookServices,u=e.setPersons,i=e.setType,b=e.setMessage;return Object(c.jsx)(c.Fragment,{children:Object(c.jsxs)("form",{onSubmit:function(e){e.preventDefault();var c=n.find((function(e){return e.name.toLowerCase()===t.toLowerCase()}));if(c&&c.number!==o&&window.confirm("".concat(c.name," already exist in the phonebook, do you want to update the number?"))){var j=Object(l.a)(Object(l.a)({},c),{},{number:o});a.update(c.id,j).then((function(e){u(n.map((function(n){return n.id!==c.id?n:e}))),i("success"),b("".concat(e.name," phone number updated to ").concat(e.number," in the phonebook"))})).catch((function(e){console.log(e.message),i("error"),b("".concat(c.name," already deleted from the phonebook")),setTimeout((function(){i(null),b(null)}),5e3)}))}else if(c||""===t)alert("".concat(t," already exist in the phonebook")),i("error"),b("".concat(c.name," already exist in the phonebook")),setTimeout((function(){i(null),b(null)}),5e3);else{var d={name:t,number:o};a.create(d).then((function(e){u(n.concat(d)),r(""),s("")})),i("success"),b("".concat(d.name," is added to the phonebook")),setTimeout((function(){i(null),b(null)}),5e3)}},children:[Object(c.jsxs)("div",{children:["name:"," ",Object(c.jsx)("input",{value:t,onChange:function(e){return r(e.target.value)}})]}),Object(c.jsxs)("div",{children:["number:"," ",Object(c.jsx)("input",{value:o,onChange:function(e){return s(e.target.value)}})]}),Object(c.jsx)("div",{children:Object(c.jsx)("button",{type:"submit",children:"add"})})]})})},j=function(e){return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("form",{children:Object(c.jsxs)("div",{children:["filter shown with",Object(c.jsx)("input",{value:e.filter,onChange:function(n){return e.setFilter(n.target.value)}})]})}),e.persons.filter((function(n){return n.name.toLocaleLowerCase()===e.filter.toLowerCase()})).map((function(e){return Object(c.jsxs)("p",{children:[e.name," ",e.number]},e.name)}))]})},d=t(4),h=t.n(d),m="/api/persons",f={getAll:function(){return h.a.get(m).then((function(e){return e.data}))},create:function(e){return h.a.post(m,e).then((function(e){return e.data}))},update:function(e,n){return console.log(e),h.a.put("".concat(m,"/").concat(e),n).then((function(e){return e.data}))},remove:function(e){return h.a.delete("".concat(m,"/").concat(e)).then((function(e){return e.date}))}},p=function(e){var n=e.message,t=e.type;return null===n?null:Object(c.jsx)("div",{children:Object(c.jsx)("p",{children:"success"===t?Object(c.jsx)("div",{className:"success",children:n}):Object(c.jsx)("div",{className:"error",children:n})})})},O=function(){var e=Object(o.useState)([]),n=Object(u.a)(e,2),t=n[0],r=n[1],s=Object(o.useState)(""),a=Object(u.a)(s,2),l=a[0],d=a[1],h=Object(o.useState)(""),m=Object(u.a)(h,2),O=m[0],x=m[1],v=Object(o.useState)(""),w=Object(u.a)(v,2),g=w[0],k=w[1],N=Object(o.useState)(null),y=Object(u.a)(N,2),S=y[0],C=y[1],T=Object(o.useState)(null),L=Object(u.a)(T,2),M=L[0],P=L[1];return Object(o.useEffect)((function(){f.getAll().then((function(e){r(e)}))}),[]),Object(c.jsxs)("div",{children:[Object(c.jsx)("h2",{children:"Phonebook"}),Object(c.jsx)(p,{message:S,type:M}),Object(c.jsx)(j,{persons:t,filter:g,setFilter:k}),Object(c.jsx)("h2",{children:"add a new "}),Object(c.jsx)(b,{persons:t,setPersons:r,newName:l,newNumber:O,setNewName:d,setNewNumber:x,phonebookServices:f,setMessage:C,setType:P}),Object(c.jsx)("h2",{children:"Numbers"}),Object(c.jsx)(i,{persons:t,setPersons:r,phonebookServices:f,setMessage:C,setType:P})]})},x=(t(38),document.getElementById("root"));a.a.render(Object(c.jsx)(r.a.StrictMode,{children:Object(c.jsx)(O,{})}),x)}},[[39,1,2]]]);
//# sourceMappingURL=main.77ad966f.chunk.js.map